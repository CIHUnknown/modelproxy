## Node-hsf Consumer   

### 处理流程   
 * 初始化：设定configserver地址，服务ID等，服务调用超时时间(responseTimeout)，从configserver更新provider地址的间隔。
 * 获取provider地址：通过HTTP，定时从configserver更新获得地址。
 * 与provider建立连接：每次更新后的地址，如果有新的provider加入，则创建新的连接，存放到providers数组，如果有旧的provider下线，则在一个responseTimeout之后断开与provider的连接。   
 * consumer通过`invoke`调用provider的服务。每次调用会生成一个唯一的`packetID`，并将这次调用的参数信息存放起来，之后序列化调用信息，向一个provider建立的连接写请求。存放的调用参数信息：  
 ```js  
   this.invokes[this.packetId] = {   
    callback: callback,  //回调函数   
    timer: timer,        //设置的timer，在responseTimeout秒之后，如果provider未返回，则返回超时错误   
    client: client,      //与provider建立的连接   
    name: name,          //调用方法名   
    args: args           //调用参数   
  }   
 ```   
  * 接收到provider连接返回的数据，将其解包后，根据返回的packetID，找到对应的调用参数信息，执行回调函数返回结果，同时将存下的调用参数信息删除。   
  * 调用过程中，如果解析或者连接出错，如果能够解析到packetID，则找出packet对应的callback错误返回。如果需要断开连接，则在一个responseTimeout之后，等provider信息返回再断开连接。   
