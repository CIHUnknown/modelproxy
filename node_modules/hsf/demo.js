'use strict';

var debug = require('debug');
debug.enable('hsf*');
var hsf = require('./');

var client = hsf.createClient({
  routeInterval: 15000,
  // configSvr: 'confregsession-1-1.test.alipay.net'
});

// var UserService = client.createConsumer(
//   'com.alipay.cif.facade.UserService', '1.0@DEFAULT', {group: 'SOFA'});
//
// UserService.invoke('test', [], function (err, result) {
//   console.log(arguments)
// });

var cdoapi = client.createConsumer('com.taobao.cdo.APIService', '1.0.0.daily');
var cdoapi2 = client.createConsumer('com.taobao.cdo.APIService', '1.0.0.daily');

function callHSF() {
  cdoapi.invoke('getUserProfile', ['dev', 'devtoken', '2066955782',
    ['user_gender', 'ali_num', 'user_interest_group_ex']],
  function (err, data) {
    console.log('cdoapi1', err, data);
  });
  cdoapi2.invoke('getUserProfile', ['dev', 'devtoken', '320',
    ['user_gender', 'ali_num', 'user_interest_group_ex']],
  function (err, data) {
    console.log('cdoapi2', err, data);
  });
}

setInterval(callHSF, 100);
